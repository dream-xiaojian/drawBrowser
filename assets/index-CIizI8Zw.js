var mt=Object.defineProperty;var vt=(e,t,r)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var x=(e,t,r)=>(vt(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function bt(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Pt(e,t){let r=t.getBoundingClientRect(),s=e.clientX-r.left,n=e.clientY-r.top;return{x:s,y:n}}function Y(...e){return e.reduce((r,s)=>r+s,0)/e.length}class q{constructor(t,r){x(this,"el",null);x(this,"pointEvent",null);this.strategyStyle=t,this.keys=r}isKeyPass(t){return this.keys[t]||!1}setStyle(t){for(let r in this.strategyStyle)if(this.strategyStyle.hasOwnProperty(r)){let s=r;t.setAttribute(bt(r),String(this.strategyStyle[s]))}}createElement(t){const r=document.createElementNS("http://www.w3.org/2000/svg",t);return this.setStyle(r),r}onStart(t){}onProcess(t){}onEnd(t){}initMouseCoordinates(t,r){return this.pointEvent=t,Pt(t,r)}_eventStart(t,r){let s=this.initMouseCoordinates(t,r);return this.onStart(s)}_eventProcess(t,r){let s=this.initMouseCoordinates(t,r);return this.onProcess(s)}_eventEnd(t,r){let s=this.initMouseCoordinates(t,r);return this.onEnd(s)}static getSvgPathFromStroke(t){const r=t.length;if(r<4)return"";let s=t[0],n=t[1];const l=t[2];let h=`M${s[0].toFixed(2)},${s[1].toFixed(2)} Q${n[0].toFixed(2)},${n[1].toFixed(2)} ${Y(n[0],l[0]).toFixed(2)},${Y(n[1],l[1]).toFixed(2)} T`;for(let i=2,a=r-1;i<a;i++)s=t[i],n=t[i+1],h+=`${Y(s[0],n[0]).toFixed(2)},${Y(s[1],n[1]).toFixed(2)} `;return h+="Z",h}}class xt extends q{onStart(t){return this.el=this.createElement("line"),this.el.setAttribute("x1",t.x.toString()),this.el.setAttribute("y1",t.y.toString()),this.el.setAttribute("x2",t.x.toString()),this.el.setAttribute("y2",t.y.toString()),this.el}onProcess(t){if(this.el==null)return!1;if(this.isKeyPass("Shift")){const r=t.x-parseInt(this.el.getAttribute("x1")),s=t.y-parseInt(this.el.getAttribute("y1"));let n=Math.atan2(s,r)*180/Math.PI;n=Math.round(n/45)*45;const l=Math.sqrt(r*r+s*s);t.x=parseInt(this.el.getAttribute("x1"))+l*Math.cos(n*Math.PI/180),t.y=parseInt(this.el.getAttribute("y1"))+l*Math.sin(n*Math.PI/180)}return this.el.setAttribute("x2",t.x.toString()),this.el.setAttribute("y2",t.y.toString()),!0}onEnd(t){return this.el=null,!0}}function Et(e,t){return new xt(e,t)}class wt extends q{constructor(){super(...arguments);x(this,"startPoint",null)}onStart(r){return this.el=this.createElement("ellipse"),this.startPoint=r,this.el}onProcess(r){return this.el==null||this.startPoint==null?!1:(this.calculate(r),!0)}onEnd(r){return this.el=null,!0}calculate(r){let s=this.startPoint.x,n=this.startPoint.y,l=r.x,h=r.y,i=Math.abs(l-s)/2,a=Math.abs(h-n)/2;if(this.isKeyPass("Shift")){let S=Math.min(i,a);i=S,a=S}let b=s+i,E=n+a;l<s&&(b=s-i),h<n&&(E=n-a),this.el.setAttribute("cx",b.toString()),this.el.setAttribute("cy",E.toString()),this.el.setAttribute("rx",i.toString()),this.el.setAttribute("ry",a.toString())}}function Mt(e,t){return new wt(e,t)}function it(e,t,r,s=n=>n){return e*s(.5-t*(.5-r))}function At(e){return[-e[0],-e[1]]}function v(e,t){return[e[0]+t[0],e[1]+t[1]]}function p(e,t){return[e[0]-t[0],e[1]-t[1]]}function m(e,t){return[e[0]*t,e[1]*t]}function Lt(e,t){return[e[0]/t,e[1]/t]}function C(e){return[e[1],-e[0]]}function ot(e,t){return e[0]*t[0]+e[1]*t[1]}function _t(e,t){return e[0]===t[0]&&e[1]===t[1]}function kt(e){return Math.hypot(e[0],e[1])}function Tt(e){return e[0]*e[0]+e[1]*e[1]}function lt(e,t){return Tt(p(e,t))}function gt(e){return Lt(e,kt(e))}function Kt(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function $(e,t,r){let s=Math.sin(r),n=Math.cos(r),l=e[0]-t[0],h=e[1]-t[1],i=l*n-h*s,a=l*s+h*n;return[i+t[0],a+t[1]]}function J(e,t,r){return v(e,m(p(t,e),r))}function at(e,t,r){return v(e,m(t,r))}var{min:T,PI:Dt}=Math,ut=.275,O=Dt+1e-4;function Ft(e,t={}){let{size:r=16,smoothing:s=.5,thinning:n=.5,simulatePressure:l=!0,easing:h=o=>o,start:i={},end:a={},last:b=!1}=t,{cap:E=!0,easing:S=o=>o*(2-o)}=i,{cap:B=!0,easing:f=o=>--o*o*o+1}=a;if(e.length===0||r<=0)return[];let g=e[e.length-1].runningLength,P=i.taper===!1?0:i.taper===!0?Math.max(r,g):i.taper,K=a.taper===!1?0:a.taper===!0?Math.max(r,g):a.taper,et=Math.pow(r*s,2),D=[],k=[],U=e.slice(0,10).reduce((o,d)=>{let u=d.pressure;if(l){let c=T(1,d.distance/r),Q=T(1,1-c);u=T(1,o+(Q-o)*(c*ut))}return(o+u)/2},e[0].pressure),y=it(r,n,e[e.length-1].pressure,h),R,W=e[0].vector,F=e[0].point,N=F,L=F,_=N,Z=!1;for(let o=0;o<e.length;o++){let{pressure:d}=e[o],{point:u,vector:c,distance:Q,runningLength:I}=e[o];if(o<e.length-1&&g-I<3)continue;if(n){if(l){let A=T(1,Q/r),H=T(1,1-A);d=T(1,U+(H-U)*(A*ut))}y=it(r,n,d,h)}else y=r/2;R===void 0&&(R=y);let yt=I<P?S(I/P):1,pt=g-I<K?f((g-I)/K):1;y=Math.max(.01,y*Math.min(yt,pt));let rt=(o<e.length-1?e[o+1]:e[o]).vector,G=o<e.length-1?ot(c,rt):1,St=ot(c,W)<0&&!Z,nt=G!==null&&G<0;if(St||nt){let A=m(C(W),y);for(let H=1/13,X=0;X<=1;X+=H)L=$(p(u,A),u,O*X),D.push(L),_=$(v(u,A),u,O*-X),k.push(_);F=L,N=_,nt&&(Z=!0);continue}if(Z=!1,o===e.length-1){let A=m(C(c),y);D.push(p(u,A)),k.push(v(u,A));continue}let st=m(C(J(rt,c,G)),y);L=p(u,st),(o<=1||lt(F,L)>et)&&(D.push(L),F=L),_=v(u,st),(o<=1||lt(N,_)>et)&&(k.push(_),N=_),U=d,W=c}let w=e[0].point.slice(0,2),M=e.length>1?e[e.length-1].point.slice(0,2):v(e[0].point,[1,1]),j=[],z=[];if(e.length===1){if(!(P||K)||b){let o=at(w,gt(C(p(w,M))),-(R||y)),d=[];for(let u=1/13,c=u;c<=1;c+=u)d.push($(o,w,O*2*c));return d}}else{if(!(P||K&&e.length===1))if(E)for(let d=1/13,u=d;u<=1;u+=d){let c=$(k[0],w,O*u);j.push(c)}else{let d=p(D[0],k[0]),u=m(d,.5),c=m(d,.51);j.push(p(w,u),p(w,c),v(w,c),v(w,u))}let o=C(At(e[e.length-1].vector));if(K||P&&e.length===1)z.push(M);else if(B){let d=at(M,o,y);for(let u=1/29,c=u;c<1;c+=u)z.push($(d,M,O*3*c))}else z.push(v(M,m(o,y)),v(M,m(o,y*.99)),p(M,m(o,y*.99)),p(M,m(o,y)))}return D.concat(z,k.reverse(),j)}function It(e,t={}){var r;let{streamline:s=.5,size:n=16,last:l=!1}=t;if(e.length===0)return[];let h=.15+(1-s)*.85,i=Array.isArray(e[0])?e:e.map(({x:f,y:g,pressure:P=.5})=>[f,g,P]);if(i.length===2){let f=i[1];i=i.slice(0,-1);for(let g=1;g<5;g++)i.push(J(i[0],f,g/4))}i.length===1&&(i=[...i,[...v(i[0],[1,1]),...i[0].slice(2)]]);let a=[{point:[i[0][0],i[0][1]],pressure:i[0][2]>=0?i[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],b=!1,E=0,S=a[0],B=i.length-1;for(let f=1;f<i.length;f++){let g=l&&f===B?i[f].slice(0,2):J(S.point,i[f],h);if(_t(S.point,g))continue;let P=Kt(g,S.point);if(E+=P,f<B&&!b){if(E<n)continue;b=!0}S={point:g,pressure:i[f][2]>=0?i[f][2]:.5,vector:gt(p(S.point,g)),distance:P,runningLength:E},a.push(S)}return a[0].vector=((r=a[1])==null?void 0:r.vector)||[0,0],a}function Ct(e,t={}){return Ft(It(e,t),t)}class V extends q{constructor(){super(...arguments);x(this,"points",[])}onStart(r){return this.el=this.createElement("path"),this.points=[r],this.el}onProcess(r){return this.el==null?!1:(this.points.push(r),this.el.setAttribute("d",V.getSvgPathD(this.points,this.strategyStyle)),!0)}onEnd(r){return this.el==null?!1:(this.el=null,!0)}static getSvgPathD(r,s){const n=Ct(r,{size:s.strokeWidth,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5},...s.strokeOptions});return q.getSvgPathFromStroke(n)}}function $t(e,t){return new V(e,t)}class Ot extends q{constructor(){super(...arguments);x(this,"startPoint",null)}onStart(r){return this.el=this.createElement("rect"),this.startPoint=r,this.el.setAttribute("x",r.x.toString()),this.el.setAttribute("y",r.y.toString()),this.el}onProcess(r){if(this.el==null||this.startPoint==null)return!1;let s=this.startPoint.x,n=this.startPoint.y,l=r.x,h=r.y,i=Math.abs(l-s),a=Math.abs(h-n);if(this.isKeyPass("Shift")){let b=Math.min(i,a);i=b,a=b}return l<s&&(s=s-i),h<n&&(n=n-a),this.el.setAttribute("x",s.toString()),this.el.setAttribute("y",n.toString()),this.el.setAttribute("width",i.toString()),this.el.setAttribute("height",a.toString()),!0}onEnd(r){return this.el==null?!1:(this.el=null,!0)}}function qt(e,t){return new Ot(e,t)}function Bt(e,t){return{line:Et(e,t),ellipse:Mt(e,t),brush:$t(e,t),rect:qt(e,t)}}class Nt{constructor(t={}){x(this,"el",null);x(this,"drawStrategies");x(this,"keys",{});this.options=t,this.drawStrategies=Bt(this.options.strategyStyle||{stroke:"#000"},this.keys),t.el&&this.mounted(t.el)}get strategyTag(){return this.options.strategyTag||"brush"}set strategyTag(t){this.options.strategyTag=t}mounted(t,r=window){if(this.el)return new Error("The board has been mounted");const s=document.querySelector(t);if(!s)return new Error("The element is not exist");if(s.tagName!=="svg")return new Error("The element must be a svg element");this.el=s,this.setListenMethod(r)}setListenMethod(t=window){const r=this.el;this.onStart=this.onStart.bind(this),this.onProcess=this.onProcess.bind(this),this.onEnd=this.onEnd.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),r.addEventListener("pointerdown",this.onStart),r.addEventListener("pointermove",this.onProcess),r.addEventListener("pointerup",this.onEnd),t.addEventListener("keydown",this.handleKeyDown),t.addEventListener("keyup",this.handleKeyUp)}recallProcess(){let t=this.drawStrategies[this.strategyTag].pointEvent;t&&this.drawStrategies[this.strategyTag]._eventProcess(t,this.el)}handleKeyDown(t){this.keys[t.key]=!0,this.recallProcess()}handleKeyUp(t){this.keys[t.key]=!1,this.recallProcess()}onStart(t){const r=this.drawStrategies[this.strategyTag]._eventStart(t,this.el);r&&this.el.appendChild(r)}onProcess(t){this.drawStrategies[this.strategyTag]._eventProcess(t,this.el)}onEnd(t){this.drawStrategies[this.strategyTag]._eventEnd(t,this.el)}}function zt(e){return new Nt(e)}const tt=zt({el:"#my_svg",strategyStyle:{stroke:"#000",fill:"transparent",strokeWidth:4}});let ht=document.querySelectorAll("[data-strategy]");ht.forEach(e=>{e.addEventListener("click",function(t){ft(ht),e.classList.add("active"),tt.strategyTag=e.getAttribute("data-strategy")})});let ct=document.querySelectorAll("[data-color]");ct.forEach(e=>{e.addEventListener("click",function(t){ft(ct),e.classList.add("active"),tt.options.strategyStyle.stroke=e.getAttribute("data-color")})});let dt=document.getElementById("size");dt.addEventListener("change",function(e){tt.options.strategyStyle.strokeWidth=Number(dt.value)});function ft(e){e.forEach(t=>{t.classList.remove("active")})}
